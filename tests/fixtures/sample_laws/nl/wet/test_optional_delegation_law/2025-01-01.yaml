---
$schema: https://example.com/schema/v0.1.0/schema.json
$id: test_optional_delegation_law
uuid: eeeeeeee-eeee-eeee-eeee-eeeeeeeeeeee
regulatory_layer: WET
publication_date: '2025-01-01'

identifiers:
  bwb_id: BWBRTEST005
  url: https://example.com/test_optional_delegation_law

articles:
  # Article that defines OPTIONAL delegation interface (with defaults)
  # This is the BW 5:42 pattern: rijkswet has defaults, gemeente CAN override
  - number: '1'
    text: |
      Optional delegation grondslag - gemeenten KUNNEN dit overschrijven.
      Als gemeente geen verordening heeft, gelden de defaults uit deze wet.
    url: https://example.com/test_optional_delegation_law#1
    machine_readable:
      legal_basis_for:
        - regulatory_layer: GEMEENTELIJKE_VERORDENING
          subject: test_optional

          contract:
            parameters:
              - name: input_value
                type: number
                required: true
            output:
              - name: result_value
                type: number

          # DEFAULTS: dit maakt de delegation OPTIONEEL
          # Als geen verordening: gebruik deze defaults
          defaults:
            definitions:
              DEFAULT_MULTIPLIER:
                value: 10
            actions:
              - output: result_value
                operation: MULTIPLY
                values:
                  - $input_value
                  - $DEFAULT_MULTIPLIER

  # Article that uses the optional delegation
  - number: '2'
    text: Orkestrator artikel dat optionele delegation gebruikt
    url: https://example.com/test_optional_delegation_law#2
    machine_readable:
      public: true
      endpoint: final_result
      execution:
        parameters:
          - name: gemeente_code
            type: string
            required: true
          - name: input_value
            type: number
            required: true
        input:
          - name: delegated_data
            type: object
            source:
              delegation:
                law_id: test_optional_delegation_law
                article: '1'
                gemeente_code: $gemeente_code
              output: result_value
              parameters:
                input_value: $input_value
        output:
          - name: final_result
            type: number
        actions:
          - output: final_result
            operation: ADD
            values:
              - 1000
              - $delegated_data.result_value
