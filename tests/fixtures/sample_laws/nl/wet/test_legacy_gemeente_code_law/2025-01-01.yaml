---
$schema: https://example.com/schema/v0.1.0/schema.json
$id: test_legacy_gemeente_code_law
uuid: aabbccdd-aabb-aabb-aabb-aabbccddee20
regulatory_layer: WET
publication_date: '2025-01-01'

identifiers:
  bwb_id: BWBRTEST020
  url: https://example.com/test_legacy_gemeente_code_law

articles:
  # Article that defines delegation interface
  - number: '1'
    text: |
      Grondslag voor backward compatibility test.
      Test dat oude gemeente_code syntax nog werkt.
    url: https://example.com/test_legacy_gemeente_code_law#1
    machine_readable:
      legal_basis_for:
        - regulatory_layer: GEMEENTELIJKE_VERORDENING
          subject: test_legacy_bc
          contract:
            parameters:
              - name: input_value
                type: number
                required: true
            output:
              - name: legacy_result
                type: number

  # Article that uses OLD gemeente_code syntax (NOT select_on)
  # This tests backward compatibility
  - number: '2'
    text: Artikel dat OUDE gemeente_code syntax gebruikt voor backward compatibility
    url: https://example.com/test_legacy_gemeente_code_law#2
    machine_readable:
      public: true
      endpoint: legacy_calculation
      execution:
        parameters:
          - name: gemeente_code
            type: string
            required: true
          - name: input_value
            type: number
            required: true
        input:
          - name: delegated_value
            type: number
            source:
              delegation:
                law_id: test_legacy_gemeente_code_law
                article: '1'
                # OLD SYNTAX: gemeente_code directly instead of select_on
                # This tests backward compatibility
                gemeente_code: $gemeente_code
              output: legacy_result
              parameters:
                input_value: $input_value
        output:
          - name: legacy_calculation
            type: number
        actions:
          - output: legacy_calculation
            operation: ADD
            values:
              - 999
              - $delegated_value
